# Welcome to healthpopR

**healthpopR** helps researchers and analysts classify populations into
exposure and response groups, visualize ICD-10-based health profiles,
and perform survival and Cox regression analysis using tidy workflows.

The package is designed for analyzing how exposure diagnoses affect
response diagnoses in population health data research. Package uses
regex code for identifying ICD-10/9/8 codes. Check Quick Example for
motivation.

## Dataset Limitations

Currently functions are developed so that they fit our specific dataset
correctly. Which means that analyses are limited to only one gender and
follow up starts at when population is 50 years old. Theses limitations
can be removed later, when we use same functions to another datasets.

## Installation

Install the development version from GitHub:

    # Install healthpopR
    remotes::install_github("janikmiet/healthpopR")

## Quick Example

Package uses regex to search diagnoses. Hereâ€™s how to classify a
population to exposure and response groups, where

- Exposure is ICD-10 code E11 (*Type 2 diabetes mellitus*)
- Response is ICD-10 codes I20-I25 (*Ischemic heart diseases*)

In diagnoses dataset we use only 2 registry sources `local` and `hilmo`.

    library(healthpopR)

    ## Load Datasets
    population <- read.csv("your_population_data.csv")
    diagnoses <- read.csv("your_diagnoses_data.csv")
    ## Classify population
    dpop <- classify_population(diagnoses,
                        exposure_icd10 = "^E11",
                        exposure_src = c("local", "hilmo"),
                        response_icd10 = "^I2[0-5]",
                        response_src = c("local", "hilmo"),
                        data_population = population,
                        data_diagnoses = diagnoses)
    head(dpop)

Check
[`data model`](https://janikmiet.github.io/healthpopR/articles/data-model.md)
-vignette to view how you should arrange your `population` and
`diagnoses` -datasets.

## Key Features

- ðŸ“Š **Population classification**:
  [`classify_population()`](https://janikmiet.github.io/healthpopR/reference/classify_population.md),
  [`classify_icd10_profile()`](https://janikmiet.github.io/healthpopR/reference/classify_icd10_profile.md)
- ðŸ§  **ICD-10 diagnostics**:
  [`plot_diagnoses_src()`](https://janikmiet.github.io/healthpopR/reference/plot_diagnoses_src.md),
  [`plot_health_icd10_profile()`](https://janikmiet.github.io/healthpopR/reference/plot_health_icd10_profile.md)
- â³ **Survival analysis**:
  [`plot_survival_km()`](https://janikmiet.github.io/healthpopR/reference/plot_survival_km.md),
  [`cox_create_data()`](https://janikmiet.github.io/healthpopR/reference/cox_create_data.md),
  [`cox_plot_spline()`](https://janikmiet.github.io/healthpopR/reference/cox_plot_spline.md)
- ðŸ“ˆ **Comparison tools**:
  [`summary_exp_resp_order()`](https://janikmiet.github.io/healthpopR/reference/summary_exp_resp_order.md),
  [`tbl_icd10_diff_by_exposure()`](https://janikmiet.github.io/healthpopR/reference/tbl_icd10_diff_by_exposure.md)
- ðŸ“Š **Incidence modeling tools**:
  [`pirr_results()`](https://janikmiet.github.io/healthpopR/reference/pirr_results.md)

## Learn More

- [Data
  Model](https://janikmiet.github.io/healthpopR/articles/data-model.md)
- [Data
  Handling](https://janikmiet.github.io/healthpopR/articles/data-handling.md)
- [Getting Started
  Guide](https://janikmiet.github.io/healthpopR/articles/getting-started.md)
- [Functions Reference
  Manual](https://janikmiet.github.io/healthpopR/reference/index.md)

# Package index

## Main functions

- [`classify_population()`](https://janikmiet.github.io/healthpopR/reference/classify_population.md)
  : Create Exposure and Optional Response Groups from Diagnoses
- [`classify_icd10_profile()`](https://janikmiet.github.io/healthpopR/reference/classify_icd10_profile.md)
  : Classify ICD-10 Profiles by Exposure Group
- [`search_diagnoses()`](https://janikmiet.github.io/healthpopR/reference/search_diagnoses.md)
  : Search Diagnoses by ICD Version and Source
- [`plot_age_distribution()`](https://janikmiet.github.io/healthpopR/reference/plot_age_distribution.md)
  : Plot Age Distribution at First Diagnosis for Exposure or Response
  Group
- [`plot_diagnoses_src()`](https://janikmiet.github.io/healthpopR/reference/plot_diagnoses_src.md)
  : Plot Venn Diagram of Diagnoses by Source
- [`summary_exp_resp_crosstabulation()`](https://janikmiet.github.io/healthpopR/reference/summary_exp_resp_crosstabulation.md)
  : Generate Crosstabulation of Exposure and Response Variables
- [`summary_exp_resp_order()`](https://janikmiet.github.io/healthpopR/reference/summary_exp_resp_order.md)
  : Summary of Exposure and Response Timing Order
- [`table_age_distribution()`](https://janikmiet.github.io/healthpopR/reference/table_age_distribution.md)
  : Summarize Age Distribution for Exposure or Response Groups

## Diagnoses

- [`search_diagnoses()`](https://janikmiet.github.io/healthpopR/reference/search_diagnoses.md)
  : Search Diagnoses by ICD Version and Source
- [`plot_diagnoses_src()`](https://janikmiet.github.io/healthpopR/reference/plot_diagnoses_src.md)
  : Plot Venn Diagram of Diagnoses by Source
- [`table_summary_diagnoses()`](https://janikmiet.github.io/healthpopR/reference/table_summary_diagnoses.md)
  : Summary Table of Diagnoses by Group

## Health Analysis functions

- [`classify_icd10_profile()`](https://janikmiet.github.io/healthpopR/reference/classify_icd10_profile.md)
  : Classify ICD-10 Profiles by Exposure Group
- [`plot_health_icd10_profile()`](https://janikmiet.github.io/healthpopR/reference/plot_health_icd10_profile.md)
  : Plot Health ICD-10 Profile Using Radar Chart
- [`tbl_icd10_diff_by_exposure()`](https://janikmiet.github.io/healthpopR/reference/tbl_icd10_diff_by_exposure.md)
  : Compare ICD-10 Diagnoses Between Exposure Groups
- [`plot_icd10_diff_by_exposure()`](https://janikmiet.github.io/healthpopR/reference/plot_icd10_diff_by_exposure.md)
  : Bar Plot of ICD-10 Diagnosis Differences Between Exposure Groups

## Survival Analysis functions

- [`create_dsurv()`](https://janikmiet.github.io/healthpopR/reference/create_dsurv.md)
  : Create Long-Format Survival Data from Exposure-Response Events
- [`plot_survival_cr()`](https://janikmiet.github.io/healthpopR/reference/plot_survival_cr.md)
  : Plot Competing Risks Survival Curve (Exposure to Response or Death)
- [`plot_survival_km()`](https://janikmiet.github.io/healthpopR/reference/plot_survival_km.md)
  : Plot Kaplan-Meier Survival Curve (Exposure to Response)
- [`survival_analysis()`](https://janikmiet.github.io/healthpopR/reference/survival_analysis.md)
  : Competing risks survival analysis between exposure and response
  diagnoses

## Cox Model Analysis

- [`cox_create_data()`](https://janikmiet.github.io/healthpopR/reference/cox_create_data.md)
  : Create Time-to-Event Data for Cox Proportional Hazards Modeling
- [`create_cox_model()`](https://janikmiet.github.io/healthpopR/reference/create_cox_model.md)
  : Create a Cox Proportional Hazards Model with Splines and Covariates
- [`cox_plot_overall()`](https://janikmiet.github.io/healthpopR/reference/cox_plot_overall.md)
  : Plot Survival Curves from Cox Model Data
- [`cox_plot_spline()`](https://janikmiet.github.io/healthpopR/reference/cox_plot_spline.md)
  : Plot Spline Effect from Cox Proportional Hazards Model

## Poisson Regression Model (SIR)

- [`pirr_data()`](https://janikmiet.github.io/healthpopR/reference/pirr_data.md)
  : Prepare Person-Time and Event Data for SIR/IRR Calculations
- [`pirr_results()`](https://janikmiet.github.io/healthpopR/reference/pirr_results.md)
  : Run PIRR-style modeling and summary plots for multiple binary
  outcomes

## Helper functions

- [`.regex_clean()`](https://janikmiet.github.io/healthpopR/reference/dot-regex_clean.md)
  : Clean Diagnosis Regex Strings
- [`.capitalize()`](https://janikmiet.github.io/healthpopR/reference/dot-capitalize.md)
  : Capitalize the First Letter of a String
- [`.relevel_by_reference()`](https://janikmiet.github.io/healthpopR/reference/dot-relevel_by_reference.md)
  : Relevel Factor Variables by Reference
- [`.safe_inc_progress()`](https://janikmiet.github.io/healthpopR/reference/dot-safe_inc_progress.md)
  : Safely Increment Shiny Progress Bar

## Data Handling

- [`recode_icd10_3letters()`](https://janikmiet.github.io/healthpopR/reference/recode_icd10_3letters.md)
  : Recode diagnosis code to ICD-10 three-letter format
- [`recode_icd10_class()`](https://janikmiet.github.io/healthpopR/reference/recode_icd10_class.md)
  : Recode ICD-10 3-letter codes into broad classification groups
- [`categorize_bmi()`](https://janikmiet.github.io/healthpopR/reference/categorize_bmi.md)
  : Categorize BMI values into clinical weight categories

## Included Datasets

- [`data_codes`](https://janikmiet.github.io/healthpopR/reference/data_codes.md)
  : Diagnoses Code Descriptions

# Articles

### Data Model and Basics

- [Data Model and
  Basics](https://janikmiet.github.io/healthpopR/articles/data-model-basics.md):

### Getting Started

- [getting-started](https://janikmiet.github.io/healthpopR/articles/getting-started.md):

### Survival Analysis

- [Survival Analysis from 50 years
  forward](https://janikmiet.github.io/healthpopR/articles/survival.md):
